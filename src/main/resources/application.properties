spring.application.name=fundizen-backend

spring.config.import=optional:file:.env[.properties]

# Server Configuration
server.port=${SERVER_PORT:8080}
server.servlet.context-path=/

# MongoDB Configuration
spring.data.mongodb.uri=${MONGODB_URI}
spring.data.mongodb.database=${MONGODB_DATABASE}

# Firebase Configuration
firebase.project-id=fundizen-7d5ba

# Stripe Configuration
stripe.api.secret-key=${STRIPE_SECRET_KEY}
stripe.api.publishable-key=${STRIPE_PUBLISHABLE_KEY}
stripe.webhook.secret=${STRIPE_WEBHOOK_SECRET}

# Payment Configuration
payment.stripe.fee-percentage=${STRIPE_FEE_PERCENTAGE:0.034}
payment.stripe.fixed-fee=${STRIPE_FIXED_FEE:1.50}
payment.platform.fee-percentage=${PLATFORM_FEE_PERCENTAGE:0.05}
payment.currency.default=MYR
payment.amount.minimum=1.00
payment.amount.maximum=100000.00

# CORS Configuration
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,https://fundizen.my}

# File Upload Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.enabled=true

# HTTP Configuration
server.tomcat.max-http-post-size=10MB
server.max-http-header-size=8KB

# Transaction Configuration
spring.transaction.default-timeout=30s
spring.transaction.rollback-on-commit-failure=true

# Cache Configuration
spring.cache.type=simple
spring.cache.cache-names=imageOptimization,paymentIntents,campaignStats

# Actuator Configuration (for health checks and monitoring)
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true

# Async Configuration
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=fundizen-async-

# Scheduled Tasks Configuration
spring.task.scheduling.pool.size=5
spring.task.scheduling.thread-name-prefix=fundizen-scheduler-

# Jackson Configuration
spring.jackson.time-zone=Asia/Kuala_Lumpur
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false

# Logging Configuration
logging.level.com.fundizen=${LOGGING_LEVEL_COM_FUNDIZEN:INFO}
logging.level.com.stripe=DEBUG
logging.level.org.springframework.security=INFO
logging.level.org.springframework.web.multipart=INFO
logging.level.org.springframework.transaction=INFO

# Custom logging for payment processing
logging.level.com.fundizen.fundizen_backend.service.StripeService=DEBUG
logging.level.com.fundizen.fundizen_backend.service.DonationService=DEBUG
logging.level.com.fundizen.fundizen_backend.controller.PaymentController=DEBUG

# Feature Flags
feature.email-notifications.enabled=${ENABLE_EMAIL_NOTIFICATIONS:true}
feature.sms-notifications.enabled=${ENABLE_SMS_NOTIFICATIONS:false}
feature.webhook-logging.enabled=${ENABLE_WEBHOOK_LOGGING:true}
feature.payment-analytics.enabled=true
feature.fraud-detection.enabled=true

# Application URLs
app.frontend.url=${FRONTEND_URL:http://localhost:3000}
app.backend.url=${BACKEND_URL:http://localhost:8080}

# Webhook URLs (for Stripe configuration)
app.webhook.payment.success=${BACKEND_URL:http://localhost:8080}/api/payment/webhook
app.webhook.payment.failure=${BACKEND_URL:http://localhost:8080}/api/payment/webhook

# Security Configuration
security.require-ssl=false
security.session.timeout=3600

# Database Pool Configuration
spring.data.mongodb.auto-index-creation=true

# Error Handling
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=false